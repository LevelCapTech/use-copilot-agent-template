---
name: Tests rules
description: テストコードに適用する実務ルール
applyTo:
  - "**/tests/**/*.py"
  - "**/*test*.py"
---
- pytest を前提とし、ファイル名は `test_*.py` / 関数名は `test_*` で一貫させる。
- 重要なバグ修正には必ず回帰テストを追加する。正常系・例外系・境界値を分けて書く。
- 外部 API / 時刻 / I/O / 環境依存はフィクスチャやモックで隔離し、テストは決定性を保つ。
- テストデータは最小限かつ共有フィクスチャで再利用する。Secrets/PII を埋め込まない。
- 実行コマンドの例: `python -m pytest -q`。スローテストはマーカーを付与して分離可能にする。
