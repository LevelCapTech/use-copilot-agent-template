# freee会計API連携 Implementation Plan

本ドキュメントは [RESEARCH] Issue の計画書です。仕様の入口は [00-index.md](../00-index.md) を参照してください。

## 1. ゴール / 非ゴール
- ゴール: freee会計API連携に向けた技術調査を完了し、DESIGNで仕様化できる材料（認証、エンドポイント、制約、運用方針）をMarkdownで整理する。
- 非ゴール: 実装コードの追加・変更、インフラ構築、実データを用いた接続検証。

## 2. スコープと変更対象
- 変更ファイル（新規/修正/削除）: 調査結果ドキュメント（`.github/copilot/90-research/freee_api_research.md`）、本プランファイル。
- 影響範囲・互換性リスク: ドキュメントのみでアプリケーション挙動への影響なし。
- 外部依存・Secrets の扱い: 外部APIの仕様引用のみ。クライアントID/シークレット等の秘密情報は記載しない。

## 3. 設計方針
- 責務分離 / データフロー: 認証フロー、データ取得、運用・セキュリティを章立てで整理し、DESIGNでそのまま利用できるようにする。
- エッジケース / 例外系 / リトライ方針: レートリミット(429)やトークン失効時の再認証・リトライ指針を明記する。
- ログと観測性（漏洩防止を含む）: トレーサビリティ確保とSecrets非出力を原則として運用案を記載する。

## 4. テスト戦略
- テスト観点: ドキュメント整合性のセルフレビューのみ。コード・APIコールは実施しない。
- モック / フィクスチャ方針: 非該当（調査ドキュメントのみ）。
- テスト追加の実行コマンド: なし（自動テスト対象外）。

## 5. CI 品質ゲート
- 実行コマンド: なし（ドキュメント変更のみ）。必要に応じてMarkdown lintは手元確認。
- 通過基準と失敗時の対応: CIでドキュメント差分確認のみ想定。破損時は内容を修正して再実行。

## 6. ロールアウト・運用
- ロールバック方法: 追加ドキュメントを削除または元に戻す。
- 監視・運用上の注意: なし（運用対象外）。

## 7. オープンな課題 / ADR 要否
- 未確定事項: Sandbox提供可否の運用条件、最終的なデプロイ先環境は別途決定。
- ADR に残すべき判断: 必要に応じて認証/Secrets管理方式をDESIGN以降でADR化。
